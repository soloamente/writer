/* ============================================ */
/* Checkbox Styles */
/* ============================================ */

.check {
  --border-radius: 6px;
  --border-width: 3px;
  --outline-offset: 3px;
  --outline-width: 2px;
  --outline-color: #579bfd;
  --initial-scale: 0.5;

  /* bouncy spring: */
  /* prettier-ignore */
  --fill-spring: linear(0, 0.0011 0.45%, 0.0095 1.36%, 0.0357, 0.0753, 0.1255 5.44%, 0.2472 8.17%, 0.6267 15.88%, 0.7426 18.6%, 0.8258, 0.896 23.13%, 0.963, 1.0123, 1.046 31.3%, 1.0609, 1.0708 34.93%, 1.077, 1.078, 1.075 41.73%, 1.0677 44.45%, 1.0316 53.98%, 1.0168 58.52%, 1.0067, 0.9999 66.68%, 0.9954 71.67%, 0.9939 77.12%, 0.9992 99.8%) .664s;

  /* non-bouncy spring: */
  /* prettier-ignore */
  /* --fill-spring: linear(0, 0.0033 0.81%, 0.027 2.42%, 0.0916 4.84%, 0.4745 15.32%, 0.6422 20.97%, 0.7175, 0.7789, 0.8283 30.64%, 0.876, 0.9111 38.71%, 0.941, 0.9611 48.39%, 0.9707, 0.978 54.84%, 0.9885 62.1%, 0.9949 70.97%, 0.9982 82.26%, 0.9997 100%) 0.4980s; */

  display: block;
  flex-shrink: 0;
  height: 1.75rem;
  width: 1.75rem;
  margin-top: 0.2em;
  position: relative;
  border-radius: var(--border-radius);
  container-type: inline-size;

  &::before {
    content: "";
    position: absolute;
    border-radius: inherit;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.2;
    transition: opacity 0.2s ease;
    border: var(--border-width) solid #fff;
  }

  .fill {
    background: #fff;
    border-radius: inherit;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    opacity: 0;
    transition: opacity ease 0.2s;
    width: 100%;

    @media (prefers-reduced-motion: no-preference) {
      /* Compute the proper border radius to start from */
      /* prettier-ignore */
      border-radius: max(0px, (var(--border-radius) - (100cqw * var(--initial-scale) / 2)) / var(--initial-scale)); /* correct for initial scale */

      scale: var(--initial-scale);
      transition: opacity ease 0.2s, scale var(--fill-spring),
        border-radius var(--fill-spring);
    }

    svg {
      height: 0.75rem;

      @media (prefers-reduced-motion: no-preference) {
        path {
          /* prettier-ignore */
          transition: stroke-dashoffset linear(0, 0.0089 1.34%, 0.0665 4.01%, 0.4534 14.71%, 0.6529 21.39%, 0.7147 24.06%, 0.7899 28.08%, 0.8297 30.75%, 0.8768, 0.9116 38.77%, 0.9438, 0.9646, 0.9779 54.81%, 0.9879 61.5%, 0.9948 70.86%, 0.9981 81.55%, 0.9996 98.93%) 0.3868s;

          stroke-dashoffset: 1;
        }
      }
    }
  }

  /* Make sure the opacity stays the same between :hover -> :checked (but not :focus-visible -> :checked) */
  input[type="checkbox"]:checked:not(:focus-visible) + & {
    &::before {
      opacity: 0.31;
    }
  }

  input[type="checkbox"]:checked + & {
    .fill {
      opacity: 1;

      @media (prefers-reduced-motion: no-preference) {
        border-radius: inherit;
        scale: 1;

        path {
          stroke-dashoffset: 0;
          transition-delay: 33ms;
        }
      }
    }
  }

  input[type="checkbox"]:focus-visible + & {
    box-shadow: 0 0 0 var(--outline-offset) var(--bg),
      0 0 0 calc(var(--outline-offset) + var(--outline-width))
        var(--outline-color);

    &,
    * {
      transition: none;
    }
  }

  label:hover &::before {
    opacity: 0.31;
  }
}

/* Label styles for checkbox */
label {
  cursor: pointer;
  display: flex;
  align-items: start;
  gap: 1.25rem;
  user-select: none;
  color: #f3f3f3;

  .text {
    display: block;
    font-weight: 600;
  }
}

/* Hidden checkbox input */
input[type="checkbox"] {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
}

